import{h as ve,m as Re,p as Ce,q as Ee,s as v,u as W,v as Oe,w as De,x as P}from"/build/_shared/chunk-MNTHBBYS.js";import{b as f,c as b,d as Ft,f as ke,g as be}from"/build/_shared/chunk-ZSCMMWXX.js";var Ae=b(X=>{"use strict";X.parse=qt;X.serialize=Vt;var zt=decodeURIComponent,Lt=encodeURIComponent,j=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function qt(t,e){if(typeof t!="string")throw new TypeError("argument str must be a string");for(var r={},n=e||{},o=t.split(";"),a=n.decode||zt,s=0;s<o.length;s++){var i=o[s],u=i.indexOf("=");if(!(u<0)){var l=i.substring(0,u).trim();if(r[l]==null){var c=i.substring(u+1,i.length).trim();c[0]==='"'&&(c=c.slice(1,-1)),r[l]=Nt(c,a)}}}return r}function Vt(t,e,r){var n=r||{},o=n.encode||Lt;if(typeof o!="function")throw new TypeError("option encode is invalid");if(!j.test(t))throw new TypeError("argument name is invalid");var a=o(e);if(a&&!j.test(a))throw new TypeError("argument val is invalid");var s=t+"="+a;if(n.maxAge!=null){var i=n.maxAge-0;if(isNaN(i)||!isFinite(i))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(i)}if(n.domain){if(!j.test(n.domain))throw new TypeError("option domain is invalid");s+="; Domain="+n.domain}if(n.path){if(!j.test(n.path))throw new TypeError("option path is invalid");s+="; Path="+n.path}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.sameSite){var u=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(u){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s}function Nt(t,e){try{return e(t)}catch{return t}}});function I(t,e){!t&&!Te[e]&&(Te[e]=!0,console.warn(e))}var Te,Q=f(()=>{Te={}});async function $t(t,e,r){let n=Kt(e);return r.length>0&&(n=await t(n,r[0])),n}async function Bt(t,e,r){if(r.length>0){for(let n of r){let o=await t(e,n);if(o!==!1)return He(o)}return null}return He(e)}function Kt(t){return btoa(Wt(encodeURIComponent(JSON.stringify(t))))}function He(t){try{return JSON.parse(decodeURIComponent(Jt(atob(t))))}catch{return{}}}function Jt(t){let e=t.toString(),r="",n=0,o,a;for(;n<e.length;)o=e.charAt(n++),/[\w*+\-./@]/.exec(o)?r+=o:(a=o.charCodeAt(0),a<256?r+="%"+Me(a,2):r+="%u"+Me(a,4).toUpperCase());return r}function Me(t,e){let r=t.toString(16);for(;r.length<e;)r="0"+r;return r}function Wt(t){let e=t.toString(),r="",n=0,o,a;for(;n<e.length;){if(o=e.charAt(n++),o==="%"){if(e.charAt(n)==="u"){if(a=e.slice(n+1,n+5),/^[\da-f]{4}$/i.exec(a)){r+=String.fromCharCode(parseInt(a,16)),n+=5;continue}}else if(a=e.slice(n,n+2),/^[\da-f]{2}$/i.exec(a)){r+=String.fromCharCode(parseInt(a,16)),n+=2;continue}}r+=o}return r}function Xt(t,e){I(!e,`The "${t}" cookie has an "expires" property set. This will cause the expires value to not be updated when the session is committed. Instead, you should set the expires value when serializing the cookie. You can use \`commitSession(session, { expires })\` if using a session storage object, or \`cookie.serialize("value", { expires })\` if you're using the cookie directly.`)}var F,Ue,R,z=f(()=>{F=ke(Ae());Q();Ue=({sign:t,unsign:e})=>(r,n={})=>{let{secrets:o,...a}={secrets:[],path:"/",sameSite:"lax",...n};return Xt(r,a.expires),{get name(){return r},get isSigned(){return o.length>0},get expires(){return typeof a.maxAge<"u"?new Date(Date.now()+a.maxAge*1e3):a.expires},async parse(s,i){if(!s)return null;let u=(0,F.parse)(s,{...a,...i});return r in u?u[r]===""?"":await Bt(e,u[r],o):null},async serialize(s,i){return(0,F.serialize)(r,s===""?"":await $t(t,s,o),{...a,...i})}}},R=t=>t!=null&&typeof t.name=="string"&&typeof t.isSigned=="boolean"&&typeof t.parse=="function"&&typeof t.serialize=="function"});function C(t){let e=unescape(encodeURIComponent(t));return Uint8Array.from(e,(r,n)=>e.charCodeAt(n))}function Y(t){let e=String.fromCharCode.apply(null,t);return decodeURIComponent(escape(e))}function E(...t){let e=new Uint8Array(t.reduce((n,o)=>n+o.length,0)),r=0;for(let n of t)e.set(n,r),r+=n.length;return e}function Pe(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}var G=f(()=>{});function je(t){return t instanceof Uint8Array?e=>t[e]:t}function Z(t,e,r,n,o){let a=je(t),s=je(r);for(let i=0;i<o;++i)if(a(e+i)!==s(n+i))return!1;return!0}function Qt(t){let e=new Array(256).fill(t.length);if(t.length>1)for(let r=0;r<t.length-1;r++)e[t[r]]=t.length-1-r;return e}var S,x,L,Ie,Fe,ze=f(()=>{G();S=Symbol("Match"),x=class{constructor(e){this._lookbehind=new Uint8Array,typeof e=="string"?this._needle=e=C(e):this._needle=e,this._lastChar=e[e.length-1],this._occ=Qt(e)}feed(e){let r=0,n,o=[];for(;r!==e.length;)[r,...n]=this._feed(e,r),o.push(...n);return o}end(){let e=this._lookbehind;return this._lookbehind=new Uint8Array,e}_feed(e,r){let n=[],o=-this._lookbehind.length;if(o<0){for(;o<0&&o<=e.length-this._needle.length;){let a=this._charAt(e,o+this._needle.length-1);if(a===this._lastChar&&this._memcmp(e,o,this._needle.length-1))return o>-this._lookbehind.length&&n.push(this._lookbehind.slice(0,this._lookbehind.length+o)),n.push(S),this._lookbehind=new Uint8Array,[o+this._needle.length,...n];o+=this._occ[a]}if(o<0)for(;o<0&&!this._memcmp(e,o,e.length-o);)o++;if(o>=0)n.push(this._lookbehind),this._lookbehind=new Uint8Array;else{let a=this._lookbehind.length+o;return a>0&&(n.push(this._lookbehind.slice(0,a)),this._lookbehind=this._lookbehind.slice(a)),this._lookbehind=Uint8Array.from(new Array(this._lookbehind.length+e.length),(s,i)=>this._charAt(e,i-this._lookbehind.length)),[e.length,...n]}}for(o+=r;o<=e.length-this._needle.length;){let a=e[o+this._needle.length-1];if(a===this._lastChar&&e[o]===this._needle[0]&&Z(this._needle,0,e,o,this._needle.length-1))return o>r&&n.push(e.slice(r,o)),n.push(S),[o+this._needle.length,...n];o+=this._occ[a]}if(o<e.length){for(;o<e.length&&(e[o]!==this._needle[0]||!Z(e,o,this._needle,0,e.length-o));)++o;o<e.length&&(this._lookbehind=e.slice(o))}return o>0&&n.push(e.slice(r,o<e.length?o:e.length)),[e.length,...n]}_charAt(e,r){return r<0?this._lookbehind[this._lookbehind.length+r]:e[r]}_memcmp(e,r,n){return Z(this._charAt.bind(this,e),r,this._needle,0,n)}},L=class{constructor(e,r){this._readableStream=r,this._search=new x(e)}async*[Symbol.asyncIterator](){let e=this._readableStream.getReader();try{for(;;){let n=await e.read();if(n.done)break;yield*this._search.feed(n.value)}let r=this._search.end();r.length&&(yield r)}finally{e.releaseLock()}}},Ie=Symbol("End of Queue"),Fe=class{constructor(e){this._chunksQueue=[],this._closed=!1,this._search=new x(e)}push(...e){if(this._closed)throw new Error("cannot call push after close");this._chunksQueue.push(...e),this._notify&&this._notify()}close(){if(this._closed)throw new Error("close was already called");this._closed=!0,this._chunksQueue.push(Ie),this._notify&&this._notify()}async*[Symbol.asyncIterator](){for(;;){let r;for(;!(r=this._chunksQueue.shift());)await new Promise(n=>this._notify=n),this._notify=void 0;if(r===Ie)break;yield*this._search.feed(r)}let e=this._search.end();e.length&&(yield e)}}});function Gt(t){let e=t.split(";").map(n=>n.trim());if(e.shift()!=="form-data")throw new Error('malformed content-disposition header: missing "form-data" in `'+JSON.stringify(e)+"`");let r={};for(let n of e){let o=n.split("=",2);if(o.length!==2)throw new Error("malformed content-disposition header: key-value pair not found - "+n+" in `"+t+"`");let[a,s]=o;if(s[0]==='"'&&s[s.length-1]==='"')r[a]=s.slice(1,-1).replace(/\\"/g,'"');else if(s[0]!=='"'&&s[s.length-1]!=='"')r[a]=s;else if(s[0]==='"'&&s[s.length-1]!=='"'||s[0]!=='"'&&s[s.length-1]==='"')throw new Error("malformed content-disposition header: mismatched quotations in `"+t+"`")}if(!r.name)throw new Error("malformed content-disposition header: missing field name in `"+t+"`");return r}function Zt(t){let e=[],r=!1,n;for(;typeof(n=t.shift())<"u";){let o=n.indexOf(":");if(o===-1)throw new Error("malformed multipart-form header: missing colon");let a=n.slice(0,o).trim().toLowerCase(),s=n.slice(o+1).trim();switch(a){case"content-disposition":r=!0,e.push(...Object.entries(Gt(s)));break;case"content-type":e.push(["contentType",s])}}if(!r)throw new Error("malformed multipart-form header: missing content-disposition");return Object.fromEntries(e)}async function er(t,e){let r=!0,n=!1,o=[[]],a=new x(T);for(;;){let s=await t.next();if(s.done)throw new Error("malformed multipart-form data: unexpected end of stream");if(r&&s.value!==S&&Pe(s.value.slice(0,2),Le))return[void 0,new Uint8Array];let i;if(s.value!==S)i=s.value;else if(!n)i=e;else throw new Error("malformed multipart-form data: unexpected boundary");if(!i.length)continue;r&&(r=!1);let u=a.feed(i);for(let[l,c]of u.entries()){let h=c===S;if(!(!h&&!c.length)){if(n&&h)return u.push(a.end()),[o.filter(p=>p.length).map(Yt).map(Y),E(...u.slice(l+1).map(p=>p===S?T:p))];(n=h)?o.push([]):o[o.length-1].push(c)}}}}async function*qe(t,e){let r=E(Le,C(e)),n=new L(r,t)[Symbol.asyncIterator]();for(;;){let a=await n.next();if(a.done)return;if(a.value===S)break}let o=new x(T);for(;;){let l=function(m){let w=[];for(let U of o.feed(m))u&&w.push(T),(u=U===S)||w.push(U);return E(...w)},[a,s]=await er(n,r);if(!a)return;async function i(){let m=await n.next();if(m.done)throw new Error("malformed multipart-form data: unexpected end of stream");return m}let u=!1,c=!1;async function h(){let m=await i(),w;if(m.value!==S)w=m.value;else if(!u)w=T;else return c=!0,{value:o.end()};return{value:l(w)}}let p=[{value:l(s)}];for(yield{...Zt(a),data:{[Symbol.asyncIterator](){return this},async next(){for(;;){let m=p.shift();if(!m)break;if(m.value.length>0)return m}for(;;){if(c)return{done:c,value:void 0};let m=await h();if(m.value.length>0)return m}}}};!c;)p.push(await h())}}var Yt,Le,T,Ve=f(()=>{ze();G();Yt=Function.prototype.apply.bind(E,void 0),Le=C("--"),T=C(`\r
`)});function Ne(...t){return async e=>{for(let r of t){let n=await r(e);if(typeof n<"u"&&n!==null)return n}}}async function $e(t,e){let r=t.headers.get("Content-Type")||"",[n,o]=r.split(/\s*;\s*boundary=/);if(!t.body||!o||n!=="multipart/form-data")throw new TypeError("Could not parse content as FormData.");let a=new FormData,s=qe(t.body,o);for await(let i of s){if(i.done)break;typeof i.filename=="string"&&(i.filename=i.filename.split(/[/\\]/).pop());let u=await e(i);typeof u<"u"&&u!==null&&a.append(i.name,u)}return a}var Be=f(()=>{Ve();});function Ke(t){return t===y.Development||t===y.Production||t===y.Test}var y,ee=f(()=>{(function(t){t.Development="development",t.Production="production",t.Test="test"})(y||(y={}))});function te(t,e){if(t instanceof Error&&e!==y.Development){let r=new Error("Unexpected Server Error");return r.stack=void 0,r}return t}function re(t,e){return Object.entries(t).reduce((r,[n,o])=>Object.assign(r,{[n]:te(o,e)}),{})}function q(t,e){let r=te(t,e);return{message:r.message,stack:r.stack}}function ne(t,e){if(!t)return null;let r=Object.entries(t),n={};for(let[o,a]of r)if(v(a))n[o]={...a,__type:"RouteErrorResponse"};else if(a instanceof Error){let s=te(a,e);n[o]={message:s.message,stack:s.stack,__type:"Error"}}else n[o]=a;return n}var oe=f(()=>{P();ee();});function Xe(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function _(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function ae(t){return tr.has(t)}function Qe(t){return ae(t.status)}function rr(t){return t!=null&&typeof t.then=="function"&&t._tracked===!0}function Ye(t,e,r){let n=new TextEncoder;return new ReadableStream({async start(a){let s={},i=[];for(let[l,c]of Object.entries(t.data))rr(c)?(s[l]=`${nr}${l}`,(typeof c._data<"u"||typeof c._error<"u")&&i.push(l)):s[l]=c;a.enqueue(n.encode(JSON.stringify(s)+`

`));for(let l of i)Je(a,n,l,t.data[l],r);let u=t.subscribe((l,c)=>{c&&Je(a,n,c,t.data[c],r)});await t.resolveData(e),u(),a.close()}})}function Je(t,e,r,n,o){"_error"in n?t.enqueue(e.encode("error:"+JSON.stringify({[r]:n._error instanceof Error?q(n._error,o):n._error})+`

`)):t.enqueue(e.encode("data:"+JSON.stringify({[r]:n._data??null})+`

`))}var k,We,V,tr,nr,N=f(()=>{P();oe();k=(t,e={})=>Re(t,e),We=(t,e={})=>Ce(t,e),V=(t,e=302)=>Ee(t,e);tr=new Set([301,302,303,307,308]);nr="__deferred_promise:"});function Ge(t){return Object.keys(t).reduce((e,r)=>(e[r]=t[r].module,e),{})}var Ze=f(()=>{});var tt=b((qr,H)=>{"use strict";var O={decodeValues:!0,map:!1,silent:!1};function se(t){return typeof t=="string"&&!!t.trim()}function ie(t,e){var r=t.split(";").filter(se),n=r.shift(),o=or(n),a=o.name,s=o.value;e=e?Object.assign({},O,e):O;try{s=e.decodeValues?decodeURIComponent(s):s}catch(u){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+s+"'. Set options.decodeValues to false to disable this feature.",u)}var i={name:a,value:s};return r.forEach(function(u){var l=u.split("="),c=l.shift().trimLeft().toLowerCase(),h=l.join("=");c==="expires"?i.expires=new Date(h):c==="max-age"?i.maxAge=parseInt(h,10):c==="secure"?i.secure=!0:c==="httponly"?i.httpOnly=!0:c==="samesite"?i.sameSite=h:i[c]=h}),i}function or(t){var e="",r="",n=t.split("=");return n.length>1?(e=n.shift(),r=n.join("=")):r=t,{name:e,value:r}}function et(t,e){if(e=e?Object.assign({},O,e):O,!t)return e.map?{}:[];if(t.headers)if(typeof t.headers.getSetCookie=="function")t=t.headers.getSetCookie();else if(t.headers["set-cookie"])t=t.headers["set-cookie"];else{var r=t.headers[Object.keys(t.headers).find(function(o){return o.toLowerCase()==="set-cookie"})];!r&&t.headers.cookie&&!e.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),t=r}if(Array.isArray(t)||(t=[t]),e=e?Object.assign({},O,e):O,e.map){var n={};return t.filter(se).reduce(function(o,a){var s=ie(a,e);return o[s.name]=s,o},n)}else return t.filter(se).map(function(o){return ie(o,e)})}function ar(t){if(Array.isArray(t))return t;if(typeof t!="string")return[];var e=[],r=0,n,o,a,s,i;function u(){for(;r<t.length&&/\s/.test(t.charAt(r));)r+=1;return r<t.length}function l(){return o=t.charAt(r),o!=="="&&o!==";"&&o!==","}for(;r<t.length;){for(n=r,i=!1;u();)if(o=t.charAt(r),o===","){for(a=r,r+=1,u(),s=r;r<t.length&&l();)r+=1;r<t.length&&t.charAt(r)==="="?(i=!0,r=s,e.push(t.substring(n,a)),n=r):r=a+1}else r+=1;(!i||r>=t.length)&&e.push(t.substring(n,t.length))}return e}H.exports=et;H.exports.parse=et;H.exports.parseString=ie;H.exports.splitCookiesString=ar});function nt(t,e){return(e.errors?e.matches.slice(0,e.matches.findIndex(n=>e.errors[n.route.id])+1):e.matches).reduce((n,o)=>{let{id:a}=o.route,s=t.routes[a].module,i=e.loaderHeaders[a]||new Headers,u=e.actionHeaders[a]||new Headers,l=new Headers(s.headers?typeof s.headers=="function"?s.headers({loaderHeaders:i,parentHeaders:n,actionHeaders:u}):s.headers:void 0);return ue(u,l),ue(i,l),ue(n,l),l},new Headers)}function ue(t,e){let r=t.get("Set-Cookie");r&&(0,rt.splitCookiesString)(r).forEach(o=>{e.append("Set-Cookie",o)})}var rt,ot=f(()=>{rt=ke(tt());});function at(t,e){if(t===!1||t===null||typeof t>"u")throw console.error("The following error is a bug in Remix; please open an issue! https://github.com/remix-run/remix/issues/new"),new Error(e)}var st=f(()=>{});function it(t,e){let r=ve(t,e);return r?r.map(n=>({params:n.params,pathname:n.pathname,route:n.route})):null}var ut=f(()=>{P();});async function lt({loadContext:t,action:e,params:r,request:n,routeId:o}){let a=await e({request:dt(ft(n)),context:t,params:r});if(a===void 0)throw new Error(`You defined an action for route "${o}" but didn't return anything from your \`action\` function. Please return a value or \`null\`.`);return _(a)?a:k(a)}async function ct({loadContext:t,loader:e,params:r,request:n,routeId:o}){let a=await e({request:dt(ft(n)),context:t,params:r});if(a===void 0)throw new Error(`You defined a loader for route "${o}" but didn't return anything from your \`loader\` function. Please return a value or \`null\`.`);return Xe(a)?a.init&&ae(a.init.status||200)?V(new Headers(a.init.headers).get("Location"),a.init):a:_(a)?a:k(a)}function ft(t){let e=new URL(t.url),r=e.searchParams.getAll("index");e.searchParams.delete("index");let n=[];for(let o of r)o&&n.push(o);for(let o of n)e.searchParams.append("index",o);return new Request(e.href,t)}function dt(t){let e=new URL(t.url);return e.searchParams.delete("_data"),new Request(e.href,t)}var ht=f(()=>{N();});function pt(t){let e={};return Object.values(t).forEach(r=>{let n=r.parentId||"";e[n]||(e[n]=[]),e[n].push(r)}),e}function le(t,e="",r=pt(t)){return(r[e]||[]).map(n=>({...n,children:le(t,n.id,r)}))}function ce(t,e,r="",n=pt(t)){return(n[r]||[]).map(o=>{let s={hasErrorBoundary:e.v2_errorBoundary===!0?o.id==="root"||o.module.ErrorBoundary!=null:o.id==="root"||o.module.CatchBoundary!=null||o.module.ErrorBoundary!=null,id:o.id,path:o.path,loader:o.module.loader?i=>ct({request:i.request,params:i.params,loadContext:i.context,loader:o.module.loader,routeId:o.id}):void 0,action:o.module.action?i=>lt({request:i.request,params:i.params,loadContext:i.context,action:o.module.action,routeId:o.id}):void 0,handle:o.module.handle};return o.index?{index:!0,...s}:{caseSensitive:o.caseSensitive,children:ce(t,e,o.id,n),...s}})}var mt=f(()=>{ht();});function yt(t){return t.replace(ir,e=>sr[e])}var sr,ir,gt=f(()=>{sr={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},ir=/[&><\u2028\u2029]/g});function fe(t){return yt(JSON.stringify(t))}var wt=f(()=>{gt();});async function ur(t,e,r,n,o){try{let a=await e.queryRoute(n,{routeId:r,requestContext:o});if(Qe(a)){let s=new Headers(a.headers);return s.set("X-Remix-Redirect",s.get("Location")),s.set("X-Remix-Status",a.status),s.delete("Location"),a.headers.get("Set-Cookie")!==null&&s.set("X-Remix-Revalidate","yes"),new Response(null,{status:204,headers:s})}if(W in a){let s=a[W],i=Ye(s,n.signal,t),u=s.init||{},l=new Headers(u.headers);return l.set("Content-Type","text/remix-deferred"),u.headers=l,new Response(i,u)}return a}catch(a){if(_(a))return a.headers.set("X-Remix-Catch","yes"),a;let s=v(a)?a.status:500,i=v(a)&&a.error?a.error:a instanceof Error?a:new Error("Unexpected Server Error");return $(i,n,t),k(q(i,t),{status:s,headers:{"X-Remix-Error":"yes"}})}}function xt(t,e,r){let n=t[e]||t.root,o=v(r)&&(!r.error||r.status===404);return o&&n.module.CatchBoundary||!o&&n.module.ErrorBoundary||!n.parentId?n.id:xt(t,n.parentId,r)}function St(t,e){if(!e.errors)return;let r={};for(let n of Object.keys(e.errors)){let o=e.errors[n],a=xt(t.routes,n,o);r[a]=o}e.errors=r}async function lr(t,e,r,n,o){let a;try{a=await r.query(n,{requestContext:o})}catch(l){return $(l,n,t),new Response(null,{status:500})}if(_(a))return a;a.errors&&(a.errors=re(a.errors,t)),e.future.v2_errorBoundary!==!0&&St(e,a);let s=nt(e,a),i={manifest:e.assets,routeModules:Ge(e.routes),staticHandlerContext:a,serverHandoffString:fe({state:{loaderData:a.loaderData,actionData:a.actionData,errors:ne(a.errors,t)},future:e.future,dev:e.dev}),future:e.future},u=e.entry.module.default;try{return await u(n,a.statusCode,s,i)}catch(l){a=De(r.dataRoutes,a,l),a.errors&&(a.errors=re(a.errors,t)),e.future.v2_errorBoundary!==!0&&St(e,a),i={...i,staticHandlerContext:a,serverHandoffString:fe({state:{loaderData:a.loaderData,actionData:a.actionData,errors:ne(a.errors,t)},future:e.future})};try{return await u(n,a.statusCode,s,i)}catch(c){return $(c,n,t),kt(c,t)}}}async function cr(t,e,r,n,o){try{let a=await e.queryRoute(n,{routeId:r,requestContext:o});return at(_(a),"Expected a Response to be returned from queryRoute"),a}catch(a){return _(a)?(a.headers.set("X-Remix-Catch","yes"),a):($(a,n,t),kt(a,t))}}function $(t,e,r){r!==y.Test&&!e.signal.aborted&&console.error(t)}function kt(t,e){let r="Unexpected Server Error";return e!==y.Production&&(r+=`

${String(t)}`),new Response(r,{status:500,headers:{"Content-Type":"text/plain"}})}var _t,bt=f(()=>{P();Ze();oe();ot();st();ee();ut();mt();N();wt();_t=(t,e)=>{let r=le(t.routes),n=ce(t.routes,t.future),o=Ke(e)?e:y.Production,a=Oe(n);return async function(i,u={}){let l=new URL(i.url),{unstable_dev:c}=t.future;if(e==="development"&&c!==!1&&l.pathname===(c===!0?"/__REMIX_ASSETS_MANIFEST":(c.remixRequestHandlerPath??"")+"/__REMIX_ASSETS_MANIFEST"))return i.method!=="GET"?new Response("Method not allowed",{status:405}):new Response(JSON.stringify(t.assets),{status:200,headers:{"Content-Type":"application/json"}});let h=it(r,l.pathname),p;if(l.searchParams.has("_data")){let m=l.searchParams.get("_data");if(p=await ur(o,a,m,i,u),t.entry.module.handleDataRequest){let w=h.find(U=>U.route.id==m);p=await t.entry.module.handleDataRequest(p,{context:u,params:w?w.params:{},request:i})}}else h&&h[h.length-1].route.module.default==null?p=await cr(o,a,h.slice(-1)[0].route.id,i,u):p=await lr(o,t,a,i,u);return i.method==="HEAD"?new Response(null,{headers:p.headers,status:p.status,statusText:p.statusText}):p}}});function de(t){return`__flash_${t}__`}function he(t){I(t.isSigned,`The "${t.name}" cookie is not signed, but session cookies should be signed to prevent tampering on the client before they are sent back to the server. See https://remix.run/utils/cookies#signing-cookies for more information.`)}var M,vt,Rt,pe=f(()=>{z();Q();M=(t={},e="")=>{let r=new Map(Object.entries(t));return{get id(){return e},get data(){return Object.fromEntries(r)},has(n){return r.has(n)||r.has(de(n))},get(n){if(r.has(n))return r.get(n);let o=de(n);if(r.has(o)){let a=r.get(o);return r.delete(o),a}},set(n,o){r.set(n,o)},flash(n,o){r.set(de(n),o)},unset(n){r.delete(n)}}},vt=t=>t!=null&&typeof t.id=="string"&&typeof t.data<"u"&&typeof t.has=="function"&&typeof t.get=="function"&&typeof t.set=="function"&&typeof t.flash=="function"&&typeof t.unset=="function",Rt=t=>({cookie:e,createData:r,readData:n,updateData:o,deleteData:a})=>{let s=R(e)?e:t(e?.name||"__session",e);return he(s),{async getSession(i,u){let l=i&&await s.parse(i,u),c=l&&await n(l);return M(c||{},l||"")},async commitSession(i,u){let{id:l,data:c}=i;return l?await o(l,c,s.expires):l=await r(c,s.expires),s.serialize(l,u)},async destroySession(i,u){return await a(i.id),s.serialize("",{...u,expires:new Date(0)})}}}});var Ct,Et=f(()=>{z();pe();Ct=t=>({cookie:e}={})=>{let r=R(e)?e:t(e?.name||"__session",e);return he(r),{async getSession(n,o){return M(n&&await r.parse(n,o)||{})},async commitSession(n,o){let a=await r.serialize(n.data,o);if(a.length>4096)throw new Error("Cookie length will exceed browser maximum. Length: "+a.length);return a},async destroySession(n,o){return r.serialize("",{...o,expires:new Date(0)})}}}});var Ot,Dt=f(()=>{Ot=t=>({cookie:e}={})=>{let r=0,n=new Map;return t({cookie:e,async createData(o,a){let s=(++r).toString();return n.set(s,{data:o,expires:a}),s},async readData(o){if(n.has(o)){let{data:a,expires:s}=n.get(o);if(!s||s>new Date)return a;s&&n.delete(o)}return null},async updateData(o,a,s){n.set(o,{data:a,expires:s})},async deleteData(o){n.delete(o)}})}});var D,me=f(()=>{D=class extends Error{constructor(e,r){super(`Field "${e}" exceeded upload size of ${r} bytes.`),this.field=e,this.maxBytes=r}}});function At({filter:t,maxPartSize:e=3e6}={}){return async({filename:r,contentType:n,name:o,data:a})=>{if(t&&!await t({filename:r,contentType:n,name:o}))return;let s=0,i=[];for await(let u of a){if(s+=u.byteLength,s>e)throw new D(o,e);i.push(u)}return typeof r=="string"?new File(i,r,{type:n}):await new Blob(i,{type:n}).text()}}var Tt=f(()=>{me();});var ye={};Ft(ye,{MaxPartSizeExceededError:()=>D,createCookieFactory:()=>Ue,createCookieSessionStorageFactory:()=>Ct,createMemorySessionStorageFactory:()=>Ot,createRequestHandler:()=>_t,createSession:()=>M,createSessionStorageFactory:()=>Rt,defer:()=>We,isCookie:()=>R,isSession:()=>vt,json:()=>k,redirect:()=>V,unstable_composeUploadHandlers:()=>Ne,unstable_createMemoryUploadHandler:()=>At,unstable_parseMultipartFormData:()=>$e});var ge=f(()=>{z();Be();N();bt();pe();Et();Dt();Tt();me();});var Mt=b(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});var we=new TextEncoder,fr=async(t,e)=>{let r=await Ht(e,["sign"]),n=we.encode(t),o=await crypto.subtle.sign("HMAC",r,n),a=btoa(String.fromCharCode(...new Uint8Array(o))).replace(/=+$/,"");return t+"."+a},dr=async(t,e)=>{let r=t.lastIndexOf("."),n=t.slice(0,r),o=t.slice(r+1),a=await Ht(e,["verify"]),s=we.encode(n),i=hr(atob(o));return await crypto.subtle.verify("HMAC",a,i,s)?n:!1};async function Ht(t,e){return await crypto.subtle.importKey("raw",we.encode(t),{name:"HMAC",hash:"SHA-256"},!1,e)}function hr(t){let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}B.sign=fr;B.unsign=dr});var _e=b(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});var K=(ge(),be(ye)),Ut=Mt(),Se=K.createCookieFactory({sign:Ut.sign,unsign:Ut.unsign}),pr=K.createCookieSessionStorageFactory(Se),Pt=K.createSessionStorageFactory(Se),mr=K.createMemorySessionStorageFactory(Pt);A.createCookie=Se;A.createCookieSessionStorage=pr;A.createMemorySessionStorage=mr;A.createSessionStorage=Pt});var jt=b(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var yr=_e();function gr({cookie:t,kv:e}){return yr.createSessionStorage({cookie:t,async createData(r,n){for(;;){let o=new Uint8Array(8);crypto.getRandomValues(o);let a=[...o].map(s=>s.toString(16).padStart(2,"0")).join("");if(!await e.get(a,"json"))return await e.put(a,JSON.stringify(r),{expiration:n?Math.round(n.getTime()/1e3):void 0}),a}},async readData(r){let n=await e.get(r);return n?JSON.parse(n):null},async updateData(r,n,o){await e.put(r,JSON.stringify(n),{expiration:o?Math.round(o.getTime()/1e3):void 0})},async deleteData(r){await e.delete(r)}})}xe.createWorkersKVSessionStorage=gr});var _r=b(d=>{"use strict";Object.defineProperty(d,"__esModule",{value:!0});var It=jt(),J=_e(),g=(ge(),be(ye)),wr=(t,e)=>(...r)=>(console.warn(e),t(...r)),Sr=wr(It.createWorkersKVSessionStorage,"`createCloudflareKVSessionStorage` is deprecated. Please use `createWorkersKVSessionStorage` instead.");d.createWorkersKVSessionStorage=It.createWorkersKVSessionStorage;d.createCookie=J.createCookie;d.createCookieSessionStorage=J.createCookieSessionStorage;d.createMemorySessionStorage=J.createMemorySessionStorage;d.createSessionStorage=J.createSessionStorage;Object.defineProperty(d,"MaxPartSizeExceededError",{enumerable:!0,get:function(){return g.MaxPartSizeExceededError}});Object.defineProperty(d,"createRequestHandler",{enumerable:!0,get:function(){return g.createRequestHandler}});Object.defineProperty(d,"createSession",{enumerable:!0,get:function(){return g.createSession}});Object.defineProperty(d,"defer",{enumerable:!0,get:function(){return g.defer}});Object.defineProperty(d,"isCookie",{enumerable:!0,get:function(){return g.isCookie}});Object.defineProperty(d,"isSession",{enumerable:!0,get:function(){return g.isSession}});Object.defineProperty(d,"json",{enumerable:!0,get:function(){return g.json}});Object.defineProperty(d,"redirect",{enumerable:!0,get:function(){return g.redirect}});Object.defineProperty(d,"unstable_composeUploadHandlers",{enumerable:!0,get:function(){return g.unstable_composeUploadHandlers}});Object.defineProperty(d,"unstable_createMemoryUploadHandler",{enumerable:!0,get:function(){return g.unstable_createMemoryUploadHandler}});Object.defineProperty(d,"unstable_parseMultipartFormData",{enumerable:!0,get:function(){return g.unstable_parseMultipartFormData}});d.createCloudflareKVSessionStorage=Sr});export{Ae as a,_r as b};
